<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <link href="./style.css" rel="stylesheet">
  <script src="./simple-instruments.js"></script>
  <script src="./editor.js"></script>
</head>

<body>
  <script>
    const outputs = {};
    SimpleInstruments.ports.forEach(port => {
      outputs[port.id] = port;
    });
    const app = Elm.Main.embed(document.body);
    app.ports.send.subscribe(events => {
      events.forEach(e => {
        const output = outputs[e.portId];
        if (output) {
          output.send(e.message, performance.now() + e.at);
        }
      });
    });
  </script>
</body>
